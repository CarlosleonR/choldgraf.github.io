

<!doctype html>
<html lang="en" class="no-js">
  <head>
    

<meta charset="utf-8">



<!-- begin SEO -->









<title>Dates in python - Predictably Noisy</title>







<meta property="og:locale" content="en-US">
<meta property="og:site_name" content="Predictably Noisy">
<meta property="og:title" content="Dates in python">


  <link rel="canonical" href="https://predictablynoisy.com/date-time-python">
  <meta property="og:url" content="https://predictablynoisy.com/date-time-python">



  <meta property="og:description" content="As a part of setting up the website for the Docathon I’ve had to re-learn all of my date string formatting rules. It’s one of those little problems you don’t really think about - turning an arbitrary string into something structured like a date - until you’ve actually got to do it.">



  <meta name="twitter:site" content="@choldgraf">
  <meta name="twitter:title" content="Dates in python">
  <meta name="twitter:description" content="As a part of setting up the website for the Docathon I’ve had to re-learn all of my date string formatting rules. It’s one of those little problems you don’t really think about - turning an arbitrary string into something structured like a date - until you’ve actually got to do it.">
  <meta name="twitter:url" content="https://predictablynoisy.com/date-time-python">

  
    <meta name="twitter:card" content="summary">
    
  

  



  

  





  <meta property="og:type" content="article">
  <meta property="article:published_time" content="2017-03-16T00:00:00-07:00">








  <script type="application/ld+json">
    {
      "@context" : "http://schema.org",
      "@type" : "Person",
      "name" : "Chris Holdgraf",
      "url" : "https://predictablynoisy.com",
      "sameAs" : null
    }
  </script>






<!-- end SEO -->


<link href="https://predictablynoisy.com/feed.xml" type="application/atom+xml" rel="alternate" title="Predictably Noisy Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- Custom CSS -->
<link rel="stylesheet" href="https://predictablynoisy.com/assets/css/holdgraf.css">

<!-- For all browsers -->
<link rel="stylesheet" href="https://predictablynoisy.com/assets/css/main.css">



<meta http-equiv="cleartype" content="on">

    

<!-- start custom head snippets -->

<link rel="apple-touch-icon" sizes="57x57" href="https://predictablynoisy.com/images/apple-touch-icon-57x57.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="60x60" href="https://predictablynoisy.com/images/apple-touch-icon-60x60.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="72x72" href="https://predictablynoisy.com/images/apple-touch-icon-72x72.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="76x76" href="https://predictablynoisy.com/images/apple-touch-icon-76x76.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="114x114" href="https://predictablynoisy.com/images/apple-touch-icon-114x114.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="120x120" href="https://predictablynoisy.com/images/apple-touch-icon-120x120.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="144x144" href="https://predictablynoisy.com/images/apple-touch-icon-144x144.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="152x152" href="https://predictablynoisy.com/images/apple-touch-icon-152x152.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="180x180" href="https://predictablynoisy.com/images/apple-touch-icon-180x180.png?v=M44lzPylqQ">
<link rel="icon" type="image/png" href="https://predictablynoisy.com/images/favicon-32x32.png?v=M44lzPylqQ" sizes="32x32">
<link rel="icon" type="image/png" href="https://predictablynoisy.com/images/android-chrome-192x192.png?v=M44lzPylqQ" sizes="192x192">
<link rel="icon" type="image/png" href="https://predictablynoisy.com/images/favicon-96x96.png?v=M44lzPylqQ" sizes="96x96">
<link rel="icon" type="image/png" href="https://predictablynoisy.com/images/favicon-16x16.png?v=M44lzPylqQ" sizes="16x16">
<link rel="manifest" href="https://predictablynoisy.com/images/manifest.json?v=M44lzPylqQ">
<link rel="mask-icon" href="https://predictablynoisy.com/images/safari-pinned-tab.svg?v=M44lzPylqQ" color="#000000">
<link rel="shortcut icon" href="/images/favicon.ico?v=M44lzPylqQ">
<meta name="msapplication-TileColor" content="#000000">
<meta name="msapplication-TileImage" content="https://predictablynoisy.com/images/mstile-144x144.png?v=M44lzPylqQ">
<meta name="msapplication-config" content="https://predictablynoisy.com/images/browserconfig.xml?v=M44lzPylqQ">
<meta name="theme-color" content="#ffffff">
<link rel="stylesheet" href="https://predictablynoisy.com/assets/css/academicons.css"/>

<script type="text/x-mathjax-config"> MathJax.Hub.Config({ TeX: { equationNumbers: { autoNumber: "all" } } }); </script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>

<!-- end custom head snippets -->

  </head>

  <body>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->
    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        <button><div class="navicon"></div></button>
        <ul class="visible-links">
          <li class="masthead__menu-item masthead__menu-item--lg"><a href="https://predictablynoisy.com/">Predictably Noisy</a></li>
          
            
            <li class="masthead__menu-item"><a href="https://predictablynoisy.com/about/">About</a></li>
          
            
            <li class="masthead__menu-item"><a href="https://predictablynoisy.com/publications/">Publications</a></li>
          
            
            <li class="masthead__menu-item"><a href="https://predictablynoisy.com/opensource/">Open Source</a></li>
          
            
            <li class="masthead__menu-item"><a href="https://predictablynoisy.com/talks/">Talks</a></li>
          
            
            <li class="masthead__menu-item"><a href="https://predictablynoisy.com/cv/">CV</a></li>
          
        </ul>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>

    





<div id="main" role="main">
  


  <div class="sidebar sticky">
  



<div itemscope itemtype="http://schema.org/Person">

  <div class="author__avatar">
    
    	<img src="https://predictablynoisy.com/images/profile.png" class="author__avatar" alt="Chris Holdgraf">
    
  </div>

  <div class="author__content">
    <h3 class="author__name">Chris Holdgraf</h3>
    <p class="author__bio">Data Science | Open Science | Brains</p>
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      
        <li><i class="fa fa-fw fa-map-marker" aria-hidden="true"></i> Berkeley, CA</li>
      
      
      
      
        <li><a href="mailto:hldgrf@gmail.com"><i class="fa fa-fw fa-envelope-square" aria-hidden="true"></i> Email</a></li>
      
      
      
        <li><a href="https://twitter.com/choldgraf"><i class="fa fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
      
      
      
      
      
      
      
      
      
        <li><a href="https://github.com/choldgraf"><i class="fa fa-fw fa-github" aria-hidden="true"></i> Github</a></li>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
        <li><a href="https://scholar.google.com/citations?user=fJmcIEIAAAAJ&hl=en"><i class="ai ai-google-scholar-square ai-fw"></i> Google Scholar</a></li>
      
      
        <li><a href="https://orcid.org/0000-0002-2391-0678"><i class="ai ai-orcid-square ai-fw"></i> ORCID</a></li>
      
      
    </ul>
  </div>
</div>

  
  </div>


  <article class="page" itemscope itemtype="http://schema.org/CreativeWork">
    <meta itemprop="headline" content="Dates in python">
    <meta itemprop="description" content="As a part of setting up the website for the Docathon I’ve had to re-learn all of my date string formatting rules. It’s one of those little problems you don’t really think about - turning an arbitrary string into something structured like a date - until you’ve actually got to do it.">
    <meta itemprop="datePublished" content="March 16, 2017">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 class="page__title" itemprop="headline">Dates in python
</h1>
          
            <p class="page__meta"><i class="fa fa-clock-o" aria-hidden="true"></i> 


  
	  8 minute read
	
</p>
          
        
        
        
          <p class="page__date"><strong><i class="fa fa-fw fa-calendar" aria-hidden="true"></i> Published:</strong> <time datetime="2017-03-16T00:00:00-07:00">March 16, 2017</time></p>
        
        
             
        
    
        </header>
      

      <section class="page__content" itemprop="text">
        <p>As a part of setting up the website for the <a href="http://docathon.org">Docathon</a> I’ve had to re-learn all of my date string formatting rules. It’s one of those little problems you don’t really think about - turning an arbitrary string into something structured like a date - until you’ve actually got to do it.</p>

<p>There are a bunch of tools in python for using date-like objects, but it’s not always easy to figure out how these work. This post is just a couple of pieces of information I’ve picked up along the process.</p>

<h2 id="useful-links">Useful links</h2>
<p>Here’s a list of useful links I’ve picked up, which I’ll mention below:</p>

<ul>
  <li><a href="http://strftime.org/">strftime.org</a> for remembering how date string formatting works.</li>
  <li><a href="http://pandas.pydata.org/pandas-docs/stable/timeseries.html">The pandas datetime docs</a></li>
  <li><a href="https://en.wikipedia.org/wiki/List_of_tz_database_time_zones">A list of time zone names</a></li>
  <li><a href="https://www.w3.org/TR/NOTE-datetime">ISO 8601</a> format explanation</li>
</ul>

<h1 id="a-quick-tour-of-our-tools">A quick tour of our tools</h1>
<p>In this post we’ll focus on two main tools for date functionality: the datetime module and pandas.</p>

<h2 id="datetime">Datetime</h2>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="n">np</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="n">pd</span>
<span class="o">%</span><span class="n">matplotlib</span> <span class="n">inline</span>
</code></pre></div></div>

<p>The datetime module is our core definition of how to represent dates in python. We can call datetime directly with a bunch of integers as input, representing years, months, days, etc:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">date</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2016</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">12</span><span class="p">)</span>
<span class="n">date</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>datetime.datetime(2016, 3, 3, 12, 12, 12)
</code></pre></div></div>

<p>We can access components of this date object as attributes:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">date</span><span class="o">.</span><span class="n">day</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>3
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">attrs</span> <span class="o">=</span> <span class="p">[</span><span class="s">'year'</span><span class="p">,</span> <span class="s">'month'</span><span class="p">,</span> <span class="s">'day'</span><span class="p">]</span>
<span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="n">attrs</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'</span><span class="se">\n</span><span class="s">---</span><span class="se">\n</span><span class="s">'</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">ii</span><span class="p">,</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">date</span><span class="p">,</span> <span class="n">ii</span><span class="p">))</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>---

year 2016

---

month 2

---

day 12
</code></pre></div></div>

<h3 id="extra-components-of-datetime-objects">Extra components of datetime objects</h3>
<p>We can also access specific sub-components of the datetime (that is, either the <strong>date</strong> or the <strong>time</strong>)</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">date</span><span class="o">.</span><span class="n">date</span><span class="p">()</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>datetime.date(2016, 3, 3)
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">date</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>datetime.time(12, 12, 12)
</code></pre></div></div>

<p>Datetime objects also have <strong>timezones</strong>. You can check whether our object already has a timezone with the <code class="highlighter-rouge">tzinfo</code> attribute:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">date</span><span class="o">.</span><span class="n">tzinfo</span>
</code></pre></div></div>

<p>As we can see, there’s nothing in there because we didn’t specify a timezone when we created this object. We need to add a timezone first.</p>

<p>However, once you start using timezones it is useful to use a more powerful package like pandas. Let’s do a quick intro:</p>

<h2 id="datetimes-in-pandas">Datetimes in pandas</h2>
<p>Pandas (among many, many other things) adds some extra functionality on top of datetime. The most useful function for this is probably <code class="highlighter-rouge">to_datetime</code>. This will try to be clever about whatever the input is, which lets us do things like give it strings:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">date</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s">'2017-03-01'</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">'Class: '</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="n">date</span><span class="p">),</span> <span class="s">'|'</span><span class="p">,</span> <span class="n">date</span><span class="p">)</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Class:  &amp;ltclass 'pandas.tslib.Timestamp'&amp;gt | 2017-03-01 00:00:00
</code></pre></div></div>

<p>Note that this isn’t the same object as the datetime object, but we can usually treat them similarly. It also exposes several new methods that can do useful things, like changing the timezone of our datetime object:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">date</span> <span class="o">=</span> <span class="n">date</span><span class="o">.</span><span class="n">tz_localize</span><span class="p">(</span><span class="s">'UTC'</span><span class="p">)</span>
<span class="n">date</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Timestamp('2017-03-01 00:00:00+0000', tz='UTC')
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">print</span><span class="p">(</span><span class="s">'timezone: '</span><span class="p">,</span> <span class="n">date</span><span class="o">.</span><span class="n">tzinfo</span><span class="p">)</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>timezone:  UTC
</code></pre></div></div>

<p>We used a time zone called “UTC”. That stands for “Coordinated Universal Time”, which is basically the global standard for the “base” time. All other timezones are expressed in reference to this base time. For example, let’s now convert our time to PST:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">date</span> <span class="o">=</span> <span class="n">date</span><span class="o">.</span><span class="n">tz_convert</span><span class="p">(</span><span class="s">'US/Pacific'</span><span class="p">)</span>
<span class="n">date</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Timestamp('2017-02-28 16:00:00-0800', tz='US/Pacific')
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">print</span><span class="p">(</span><span class="s">'timezone: '</span><span class="p">,</span> <span class="n">date</span><span class="o">.</span><span class="n">tzinfo</span><span class="p">)</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>timezone:  US/Pacific
</code></pre></div></div>

<p>Notice how we now see the <code class="highlighter-rouge">-0800</code> at the end. This tells us what kind of offset the ‘US/Pacific’ timezone is from ‘UTC’. It’s expressed as <code class="highlighter-rouge">-mmss</code>, where <code class="highlighter-rouge">m = minute</code> and <code class="highlighter-rouge">s = second</code></p>

<p>One of the really nice things about pandas is that we can represent <strong>ranges</strong> in python. Let’s generate a range of dates below:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># The `freq` parameter tells us the size of the jump between items</span>
<span class="n">freq</span> <span class="o">=</span> <span class="s">'H'</span>  <span class="c"># H == hours, D == days</span>
<span class="n">dates</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s">'2017-03-01'</span><span class="p">,</span> <span class="s">'2017-03-05'</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="n">freq</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="s">'UTC'</span><span class="p">)</span>
<span class="n">dates</span><span class="p">[:</span><span class="mi">5</span><span class="p">]</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>DatetimeIndex(['2017-03-01 00:00:00+00:00', '2017-03-01 01:00:00+00:00',
               '2017-03-01 02:00:00+00:00', '2017-03-01 03:00:00+00:00',
               '2017-03-01 04:00:00+00:00'],
              dtype='datetime64[ns, UTC]', freq='H')
</code></pre></div></div>

<p>This lets us do several things, such as create masks for any data we have:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">dates</span> <span class="o">&lt;</span> <span class="s">"2017-03-02"</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>array([ True,  True,  True,  True,  True,  True,  True,  True,  True,
        True,  True,  True,  True,  True,  True,  True,  True,  True,
        True,  True,  True,  True,  True,  True, False, False, False,
       False, False, False, False, False, False, False, False, False,
       False, False, False, False, False, False, False, False, False,
       False, False, False, False, False, False, False, False, False,
       False, False, False, False, False, False, False, False, False,
       False, False, False, False, False, False, False, False, False,
       False, False, False, False, False, False, False, False, False,
       False, False, False, False, False, False, False, False, False,
       False, False, False, False, False, False, False], dtype=bool)
</code></pre></div></div>

<p>It also lets us plot things across dates:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">dates</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s">'2017-01-01'</span><span class="p">,</span> <span class="s">'2017-03-06'</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s">'H'</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="s">'UTC'</span><span class="p">)</span>
<span class="n">sr</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">dates</span><span class="p">)),</span> <span class="n">index</span><span class="o">=</span><span class="n">dates</span><span class="p">)</span>
<span class="n">sr</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>  <span class="c"># Give us a 30 hour rolling mean</span>
</code></pre></div></div>

<p><img src="../images/2017/ntbk/2017-03-16-dates_in_python_26_1.png" alt="png" /></p>

<p>Note that if we now change the timezone, some of the days have changed because of the time shift:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Original times</span>
<span class="n">dates</span><span class="p">[:</span><span class="mi">5</span><span class="p">]</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>DatetimeIndex(['2017-01-01 00:00:00+00:00', '2017-01-01 01:00:00+00:00',
               '2017-01-01 02:00:00+00:00', '2017-01-01 03:00:00+00:00',
               '2017-01-01 04:00:00+00:00'],
              dtype='datetime64[ns, UTC]', freq='H')
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># New times</span>
<span class="n">dates</span><span class="o">.</span><span class="n">tz_convert</span><span class="p">(</span><span class="s">'US/Pacific'</span><span class="p">)[:</span><span class="mi">5</span><span class="p">]</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>DatetimeIndex(['2016-12-31 16:00:00-08:00', '2016-12-31 17:00:00-08:00',
               '2016-12-31 18:00:00-08:00', '2016-12-31 19:00:00-08:00',
               '2016-12-31 20:00:00-08:00'],
              dtype='datetime64[ns, US/Pacific]', freq='H')
</code></pre></div></div>

<p>For more information about date objects in pandas, check out:</p>

<ul>
  <li><a href="http://pandas.pydata.org/pandas-docs/stable/timeseries.html">The pandas datetime docs</a></li>
</ul>

<p>And this is useful for figuring out how to convert between timezones:</p>

<ul>
  <li><a href="https://en.wikipedia.org/wiki/List_of_tz_database_time_zones">A list of time zone names</a></li>
</ul>

<h1 id="parsing-strings-as-a-date">Parsing strings as a date</h1>
<h2 id="iso-8601">ISO 8601</h2>
<p>So how is pandas doing all of these string auto-conversions? Well, there are a few string structures that are classically defined as date-like structures. For example, the <code class="highlighter-rouge">yyyy-mm-dd</code> string I gave above looks fairly straightforward for a date.</p>

<p>What if we wanted to do something more complex with strings? For this, we use the <a href="https://www.w3.org/TR/NOTE-datetime">ISO 8601</a>. It takes the following form:</p>

<p><code class="highlighter-rouge">YYYY-MM-DDThh:mm:ss</code>.</p>

<p>Most of these are pretty self-explanatory, but of note is the <code class="highlighter-rouge">Z</code> at the end. This simply says that there is zero offset for this datetime, AKA it is “UTC” time.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">date</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s">'2017-03-01T12:34:02Z'</span><span class="p">)</span>
<span class="n">date</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Timestamp('2017-03-01 12:34:02')
</code></pre></div></div>

<h3 id="arbitrary-strings">Arbitrary strings</h3>
<p>We can also tell pandas how to parse an arbitrary date string. For this, we use placeholders representing different components of the date, and then construct a “parsing string” that we give to the function. This tells the function how to turn input strings into datetime objects. For example, let’s say we have this string:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">date_string</span> <span class="o">=</span> <span class="s">'02/2016/12'</span>
</code></pre></div></div>

<p>This is a little tricky, because it’s unclear which is the month and which is the day. By specifying a date parsing string, we can easily parse this. The placeholders that we use are in the <a href="http://strftime.org/">strftime</a> website linked above. Here are some useful ones:</p>

<ul>
  <li><code class="highlighter-rouge">%Y</code> = year</li>
  <li><code class="highlighter-rouge">%m</code> = month</li>
  <li><code class="highlighter-rouge">%d</code> = day</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">date</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">date_string</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="s">'</span><span class="si">%</span><span class="s">m/</span><span class="si">%</span><span class="s">Y/</span><span class="si">%</span><span class="s">d'</span><span class="p">)</span>
<span class="n">date</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Timestamp('2016-02-12 00:00:00')
</code></pre></div></div>

<p>Above we told pandas to parse the date string as <code class="highlighter-rouge">{month}/{year}/{day}</code>. We can do this with any string structure we like:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Create a complicated date string</span>
<span class="n">date_string</span> <span class="o">=</span> <span class="s">'02/2016/12 and the time is 11 hr 04 min and 02 sec'</span>

<span class="c"># And tell `to_datetime` how to parse it</span>
<span class="n">date</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">date_string</span><span class="p">,</span>
                      <span class="n">format</span><span class="o">=</span><span class="s">'</span><span class="si">%</span><span class="s">m/</span><span class="si">%</span><span class="s">Y/</span><span class="si">%</span><span class="s">d and the time is </span><span class="si">%</span><span class="s">H hr </span><span class="si">%</span><span class="s">M min and </span><span class="si">%</span><span class="s">S sec'</span><span class="p">)</span>
<span class="n">date</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Timestamp('2016-02-12 11:04:02')
</code></pre></div></div>

<h3 id="printing-strings">Printing strings</h3>
<p>The same principle can be applied to printing strings. Any datetime object has a method called <code class="highlighter-rouge">strftime</code>. This lets you create a <strong>string</strong> from <strong>time</strong>. You can pass a similar date parsing string to what we used above, and it will tell the object what kind of string to create:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">date</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s">'</span><span class="si">%</span><span class="s">Y/</span><span class="si">%</span><span class="s">m and </span><span class="si">%</span><span class="s">d days'</span><span class="p">)</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>'2016/02 and 12 days'
</code></pre></div></div>

<p>You can also use this to do some nice formatting, e.g.:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">date</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s">'</span><span class="si">%</span><span class="s">A, </span><span class="si">%</span><span class="s">B </span><span class="si">%</span><span class="s">d, </span><span class="si">%</span><span class="s">Y'</span><span class="p">)</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>'Friday, February 12, 2016'
</code></pre></div></div>

<p>You can also pass these parsing strings to the <code class="highlighter-rouge">format</code> method of python strings. For example:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">mystring</span> <span class="o">=</span> <span class="s">"Today's date is...{:</span><span class="si">%</span><span class="s">A, </span><span class="si">%</span><span class="s">B </span><span class="si">%</span><span class="s">d, </span><span class="si">%</span><span class="s">Y}"</span>
<span class="k">print</span><span class="p">(</span><span class="n">mystring</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">date</span><span class="p">))</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Today's date is...Friday, February 12, 2016
</code></pre></div></div>

<h2 id="and-thats-itsort-of">And that’s it…sort of</h2>
<p>In reality this is the tip of the iceberg when it comes to using datetime objects, but this should be enough to get you started. Make sure that any time you read in new data, you double check whether it is timezone encoded. If it isn’t, then figure out what timezone you can assume (often it is UTC), and encoding it yourself to avoid confusion.</p>

<p>Datetime objects are incredibly useful, but can be a little confusing, so I hope this helps clear some things up!</p>

        
      </section>

      <footer class="page__meta">
        
        


  




  
  
  

  <p class="page__taxonomy">
    <strong><i class="fa fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="https://predictablynoisy.com/tags/#" class="page__taxonomy-item" rel="tag"></a><span class="sep">, </span>
    
      
      
      <a href="https://predictablynoisy.com/tags/#python" class="page__taxonomy-item" rel="tag">python</a><span class="sep">, </span>
    
      
      
      <a href="https://predictablynoisy.com/tags/#open" class="page__taxonomy-item" rel="tag">open</a><span class="sep">, </span>
    
      
      
      <a href="https://predictablynoisy.com/tags/#" class="page__taxonomy-item" rel="tag"></a><span class="sep">, </span>
    
      
      
      <a href="https://predictablynoisy.com/tags/#science" class="page__taxonomy-item" rel="tag">science</a>
    
    </span>
  </p>




  






  
  
  

  <p class="page__taxonomy">
    <strong><i class="fa fa-fw fa-folder-open" aria-hidden="true"></i> Categories: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="https://predictablynoisy.com/categories/#" class="page__taxonomy-item" rel="tag"></a><span class="sep">, </span>
    
      
      
      <a href="https://predictablynoisy.com/categories/#dates" class="page__taxonomy-item" rel="tag">dates</a><span class="sep">, </span>
    
      
      
      <a href="https://predictablynoisy.com/categories/#" class="page__taxonomy-item" rel="tag"></a>
    
    </span>
  </p>


      </footer>

      

<section class="page__share">
  
    <h4 class="page__share-title">Share on</h4>
  

  <a href="https://twitter.com/intent/tweet?text=https://predictablynoisy.com/date-time-python" class="btn btn--twitter" title="Share on Twitter"><i class="fa fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=https://predictablynoisy.com/date-time-python" class="btn btn--facebook" title="Share on Facebook"><i class="fa fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://plus.google.com/share?url=https://predictablynoisy.com/date-time-python" class="btn btn--google-plus" title="Share on Google Plus"><i class="fa fa-fw fa-google-plus" aria-hidden="true"></i><span> Google+</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://predictablynoisy.com/date-time-python" class="btn btn--linkedin" title="Share on LinkedIn"><i class="fa fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>

      


  <nav class="pagination">
    
      <a href="https://predictablynoisy.com/matplotlib-cycles" class="pagination--pager" title="Matplotlib Cyclers are Great
">Previous</a>
    
    
      <a href="https://predictablynoisy.com/date-analysis-viz-python" class="pagination--pager" title="Combining dates with analysis visualization in python
">Next</a>
    
  </nav>

    </div>

    
  </article>

  
  
</div>


    </script>

    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->
<a href="/sitemap/">Sitemap</a>
<!-- end custom footer snippets -->

        

<div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    
    
      <li><a href="https://twitter.com/choldgraf"><i class="fa fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
    
    
    
      <li><a href="http://github.com/choldgraf"><i class="fa fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
    
    
    <li><a href="https://predictablynoisy.com/feed.xml"><i class="fa fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2018 Chris Holdgraf. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://github.com/academicpages/academicpages.github.io">AcademicPages</a>, a fork of <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    <script src="https://predictablynoisy.com/assets/js/main.min.js"></script>




  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', '', 'auto');
  ga('send', 'pageview');
</script>






  </body>
</html>

