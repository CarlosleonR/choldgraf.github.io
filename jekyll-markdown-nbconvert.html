<!doctype html><html lang="en" class="no-js"><head><meta charset="utf-8"> <!-- begin SEO --><title>Blogging with Jupyter Notebooks and Jekyll using nbconvert templates - Predictably Noisy</title><meta property="og:locale" content="en-US"><meta property="og:site_name" content="Predictably Noisy"><meta property="og:title" content="Blogging with Jupyter Notebooks and Jekyll using nbconvert templates"><link rel="canonical" href="https://predictablynoisy.com/jekyll-markdown-nbconvert"><meta property="og:url" content="https://predictablynoisy.com/jekyll-markdown-nbconvert"><meta name="twitter:site" content="@choldgraf"><meta name="twitter:title" content="Blogging with Jupyter Notebooks and Jekyll using nbconvert templates"><meta name="twitter:description" content="About Me"><meta name="twitter:url" content="https://predictablynoisy.com/jekyll-markdown-nbconvert"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://predictablynoisy.com/images/profile.png"><meta property="og:type" content="article"><meta property="article:published_time" content="2018-05-23T00:00:00+00:00"> <script type="application/ld+json"> { "@context": "https://schema.org", "@type": "Organization", "url": "https://predictablynoisy.com", "logo": "https://predictablynoisy.com/images/profile.png" } </script> <script type="application/ld+json"> { "@context" : "https://schema.org", "@type" : "Person", "name" : "Chris Holdgraf", "url" : "https://predictablynoisy.com", "sameAs" : null } </script> <!-- end SEO --><link href="https://predictablynoisy.com/feed.xml" type="application/atom+xml" rel="alternate" title="Predictably Noisy Feed"> <!-- http://t.co/dKP3o1e --><meta name="HandheldFriendly" content="True"><meta name="MobileOptimized" content="320"><meta name="viewport" content="width=device-width, initial-scale=1.0"> <script> document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js '; </script> <!-- For all browsers --><link rel="stylesheet" href="https://predictablynoisy.com/assets/css/main.css"> <!-- Jupyter Book CSS and JS --><link rel="stylesheet" href="https://predictablynoisy.com/assets/css/main.css"> <!-- Custom CSS --><link rel="stylesheet" href="https://predictablynoisy.com/assets/css/jupyterbook.css"> <script type="text/javascript" src="https://predictablynoisy.com/assets/js/jupyterbook.js"></script><meta http-equiv="cleartype" content="on"> <!-- start custom head snippets --><link rel="apple-touch-icon" sizes="57x57" href="https://predictablynoisy.com/images/apple-touch-icon-57x57.png?v=M44lzPylqQ"><link rel="apple-touch-icon" sizes="60x60" href="https://predictablynoisy.com/images/apple-touch-icon-60x60.png?v=M44lzPylqQ"><link rel="apple-touch-icon" sizes="72x72" href="https://predictablynoisy.com/images/apple-touch-icon-72x72.png?v=M44lzPylqQ"><link rel="apple-touch-icon" sizes="76x76" href="https://predictablynoisy.com/images/apple-touch-icon-76x76.png?v=M44lzPylqQ"><link rel="apple-touch-icon" sizes="114x114" href="https://predictablynoisy.com/images/apple-touch-icon-114x114.png?v=M44lzPylqQ"><link rel="apple-touch-icon" sizes="120x120" href="https://predictablynoisy.com/images/apple-touch-icon-120x120.png?v=M44lzPylqQ"><link rel="apple-touch-icon" sizes="144x144" href="https://predictablynoisy.com/images/apple-touch-icon-144x144.png?v=M44lzPylqQ"><link rel="apple-touch-icon" sizes="152x152" href="https://predictablynoisy.com/images/apple-touch-icon-152x152.png?v=M44lzPylqQ"><link rel="apple-touch-icon" sizes="180x180" href="https://predictablynoisy.com/images/apple-touch-icon-180x180.png?v=M44lzPylqQ"><link rel="icon" type="image/png" href="https://predictablynoisy.com/images/favicon-32x32.png?v=M44lzPylqQ" sizes="32x32"><link rel="icon" type="image/png" href="https://predictablynoisy.com/images/android-chrome-192x192.png?v=M44lzPylqQ" sizes="192x192"><link rel="icon" type="image/png" href="https://predictablynoisy.com/images/favicon-96x96.png?v=M44lzPylqQ" sizes="96x96"><link rel="icon" type="image/png" href="https://predictablynoisy.com/images/favicon-16x16.png?v=M44lzPylqQ" sizes="16x16"><link rel="manifest" href="https://predictablynoisy.com/images/manifest.json?v=M44lzPylqQ"><link rel="mask-icon" href="https://predictablynoisy.com/images/safari-pinned-tab.svg?v=M44lzPylqQ" color="#000000"><link rel="shortcut icon" href="/images/favicon.ico?v=M44lzPylqQ"><meta name="msapplication-TileColor" content="#000000"><meta name="msapplication-TileImage" content="https://predictablynoisy.com/images/mstile-144x144.png?v=M44lzPylqQ"><meta name="msapplication-config" content="https://predictablynoisy.com/images/browserconfig.xml?v=M44lzPylqQ"><meta name="theme-color" content="#ffffff"><link rel="stylesheet" href="https://predictablynoisy.com/assets/css/academicons.css"/> <script type="text/x-mathjax-config"> MathJax.Hub.Config({ TeX: { equationNumbers: { autoNumber: "all" } } }); </script> <script type="text/x-mathjax-config"> MathJax.Hub.Config({ tex2jax: { inlineMath: [ ['$','$'], ["\\(","\\)"] ], processEscapes: true } }); </script> <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script> <!-- Load JQuery --> <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script> <!-- Load clipboard.js --> <script src="https://cdn.jsdelivr.net/npm/clipboard@1/dist/clipboard.min.js"></script> <!-- Custom scripts to load after site JS is loaded --> <script src="https://predictablynoisy.com/assets/js/copypaste.js" type="text/javascript"></script> <!-- end custom head snippets --><link rel="stylesheet" href="/assets/css/data8.css"><link rel="stylesheet" href="/assets/css/holdgraf.css"></head><body> <!--[if lt IE 9]><div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div><![endif]--><div class="masthead"><div class="masthead__inner-wrap"><div class="masthead__menu"><nav id="site-nav" class="greedy-nav"> <button><div class="navicon"></div></button><ul class="visible-links"><li class="masthead__menu-item masthead__menu-item--lg"><a href="https://predictablynoisy.com/">Predictably Noisy</a></li><li class="masthead__menu-item"><a href="/about/">About me</a></li><li class="masthead__menu-item"><a href="/publications/">Publications</a></li></ul><ul class="hidden-links hidden"></ul></nav></div></div></div><div id="main" role="main"><div class="sidebar sticky"><div itemscope itemtype="http://schema.org/Person"><div class="author__avatar"> <img src="https://predictablynoisy.com/images/profile.png" class="author__avatar" alt="Chris Holdgraf"></div><div class="author__content"><h3 class="author__name">Chris Holdgraf</h3><p class="author__bio">Data Science | Open Science | Brains</p></div><div class="author__urls-wrapper"> <button class="btn btn--inverse">Follow</button><ul class="author__urls social-icons"><li><i class="fa fa-fw fa-map-marker" aria-hidden="true"></i> Berkeley, CA</li><li><a href="mailto:hldgrf@gmail.com"><i class="fa fa-fw fa-envelope-square" aria-hidden="true"></i> Email</a></li><li><a href="https://twitter.com/choldgraf"><i class="fa fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li><li><a href="https://www.linkedin.com/in/chrisholdgraf"><i class="fa fa-fw fa-linkedin-square" aria-hidden="true"></i> LinkedIn</a></li><li><a href="https://github.com/choldgraf"><i class="fa fa-fw fa-github" aria-hidden="true"></i> Github</a></li><li><a href="https://scholar.google.com/citations?user=fJmcIEIAAAAJ&hl=en"><i class="ai ai-google-scholar-square ai-fw"></i> Google Scholar</a></li><li><a href="https://orcid.org/0000-0002-2391-0678"><i class="ai ai-orcid-square ai-fw"></i> ORCID</a></li></ul></div></div></div><article class="page" itemscope itemtype="http://schema.org/CreativeWork"><meta itemprop="headline" content="Blogging with Jupyter Notebooks and Jekyll using nbconvert templates"><meta itemprop="datePublished" content="May 23, 2018"><div class="page__inner-wrap"><header><h1 class="page__title" itemprop="headline">Blogging with Jupyter Notebooks and Jekyll using nbconvert templates</h1><p class="page__date"><strong><i class="fa fa-fw fa-calendar" aria-hidden="true"></i> Published:</strong> <time datetime="2018-05-23T00:00:00+00:00">May 23, 2018</time></p></header><section class="page__content" itemprop="text"><p>Here’s a quick (and hopefully helpful) post for those wishing to blog in Jekyll using Jupyter notebooks. As some of you may know, <code class="language-plaintext highlighter-rouge">nbconvert</code> can easily convert your <code class="language-plaintext highlighter-rouge">.ipynb</code> files to markdown, which Jekyll can easily turn into blog posts for you.</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>nbconvert --to markdown myfile.ipynb
</code></pre></div></div><p>However, an annoying part of this is that Markdown doesn’t include classes for input and outputs, which means they each get treated the same in the output. Not ideal.</p><p>Fortunately, <a href="https://nbconvert.readthedocs.io/en/latest/external_exporters.html">you can customize nbconvert extensively</a>. First, it’s possible to <a href="https://nbconvert.readthedocs.io/en/latest/external_exporters.html#writing-a-custom-exporter">create your <em>own</em> exporter class</a>, but this is a bit heavy for what we want to do. In our case, we’d simply like to <em>extend</em> the markdown exporter so that it outputs Jekyll-friendly markdown.</p><h2 id="extending-nbconverts-markdown-template">Extending <code class="language-plaintext highlighter-rouge">nbconvert's</code> markdown template</h2><p>Because <code class="language-plaintext highlighter-rouge">nbconvert</code> uses Liquid Templates for its exporters, this is relatively easy! For example, <a href="https://github.com/jupyter/nbconvert/blob/master/nbconvert/templates/markdown.tpl">here is <code class="language-plaintext highlighter-rouge">nbconvert</code>’s markdown template</a>. You can see how it extends another template, then adds some modifications of its own. What we need to do is create a new template that slightly modifies the functionality of <code class="language-plaintext highlighter-rouge">nbconvert</code>’s markdown template. Then we can use the same markdown exporter, but with our custom template defining how the markdown is created.</p><p>To treat input and output text differently, we’ll extend <code class="language-plaintext highlighter-rouge">nbconvert</code>’s base markdown template by creating a template file of our own. Simply write the following lines into a file called <code class="language-plaintext highlighter-rouge">mytemplate.tpl</code>.</p><figure class="highlight"><pre><code class="language-html" data-lang="html">  {% extends 'markdown.tpl' %}

  <span class="c">&lt;!-- Add Div for input area --&gt;</span>
  {% block input %}
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"input_area"</span> <span class="na">markdown=</span><span class="s">"1"</span><span class="nt">&gt;</span>
  {{ super() }}
  <span class="nt">&lt;/div&gt;</span>
  {% endblock input %}

  <span class="c">&lt;!-- Remove indentations for output text and add div classes  --&gt;</span>
  {% block stream %}
  {:.output_stream}
  ```
  {{ output.text }}
  ```
  {% endblock stream %}


  {% block data_text %}
  {:.output_data_text}
  ```
  {{ output.data['text/plain'] }}
  ```
  {% endblock data_text %}


  {% block traceback_line  %}
  {:.output_traceback_line}
  ```
  {{ line | strip_ansi }}
  ```
  {% endblock traceback_line  %}

  <span class="c">&lt;!-- Tell Jekyll not to render HTML output blocks as markdown --&gt;</span>
  {% block data_html %}
  <span class="nt">&lt;div</span> <span class="na">markdown=</span><span class="s">"0"</span><span class="nt">&gt;</span>
  {{ output.data['text/html'] }}
  <span class="nt">&lt;/div&gt;</span>
  {% endblock data_html %}</code></pre></figure><p>Above, we’re doing two things:</p><ol><li>Overriding the input area block so that it is now wrapped in <code class="language-plaintext highlighter-rouge">&lt;div&gt;</code> tags. Note that we can set a custom class, and set <code class="language-plaintext highlighter-rouge">markdown="1"</code> so that the markdown conversion occurs within the div.</li><li>Overriding various output text blocks so that we remove the indentation that was used to denote a “code” cell. Instead, we’ll wrap the output text in more common <code class="language-plaintext highlighter-rouge">```</code> characters, and use a trick to add a class to code blocks: <code class="language-plaintext highlighter-rouge">{:.class_name}</code> syntax.</li></ol><p>We can then directly reference this template when we call <code class="language-plaintext highlighter-rouge">nbconvert</code>:</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>nbconvert --to markdown --template path/to/mytemplate.tpl myfile.ipynb
</code></pre></div></div><p>As a result, we now have classes around each of these divs that we can style however we like. For example, here are the CSS rules I added to remove the theme’s “code box” around each of the output areas:</p><div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">.input_area</span> <span class="nt">div</span><span class="nc">.highlighter-rouge</span> <span class="p">{</span>
  <span class="nl">background-color</span><span class="p">:</span> <span class="m">#f7f7f7</span>  <span class="cp">!important</span><span class="p">;</span>
<span class="p">}</span>

<span class="nc">.output_stream</span><span class="o">,</span> <span class="nc">.output_data_text</span><span class="o">,</span> <span class="nc">.output_traceback_line</span> <span class="p">{</span>
  <span class="nl">margin-left</span><span class="p">:</span> <span class="m">2%</span> <span class="cp">!important</span><span class="p">;</span>
  <span class="nl">border</span><span class="p">:</span> <span class="nb">none</span> <span class="cp">!important</span><span class="p">;</span>
  <span class="nl">border-radius</span><span class="p">:</span> <span class="m">4px</span> <span class="cp">!important</span><span class="p">;</span>
  <span class="nl">background-color</span><span class="p">:</span> <span class="m">#fafafa</span> <span class="cp">!important</span><span class="p">;</span>
  <span class="nl">box-shadow</span><span class="p">:</span> <span class="nb">none</span> <span class="cp">!important</span><span class="p">;</span>
<span class="p">}</span>

<span class="nc">.output_stream</span><span class="nd">:before</span><span class="o">,</span> <span class="nc">.output_data_text</span><span class="nd">:before</span><span class="o">,</span> <span class="nc">.output_traceback_line</span><span class="nd">:before</span><span class="p">{</span>
  <span class="nl">content</span><span class="p">:</span> <span class="nb">none</span> <span class="cp">!important</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div><p>It took me a while to figure out this pattern, so hopefully other people find it useful as well!</p></section><footer class="page__meta"></footer></div></article></div></script><div class="page__footer"><footer> <!-- start custom footer snippets --> <a href="/sitemap/">Sitemap</a> <!-- end custom footer snippets --><div class="page__footer-follow"><ul class="social-icons"><li><strong>Follow:</strong></li><li><a href="https://twitter.com/choldgraf"><i class="fa fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li><li><a href="http://github.com/choldgraf"><i class="fa fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li><li><a href="https://predictablynoisy.com/feed.xml"><i class="fa fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li></ul></div><div class="page__footer-copyright">&copy; 2020 Chris Holdgraf. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://github.com/academicpages/academicpages.github.io">AcademicPages</a>, a fork of <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div></footer></div><script src="https://predictablynoisy.com/assets/js/main.min.js"></script> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-88310237-1', 'auto'); ga('send', 'pageview'); </script></body></html>
